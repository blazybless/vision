(function(A){var B=window.AmazonUIPageJS||window.P,ta=B._namespace||B.attributeErrors,e=ta?ta("DetailPageImageBlockAssets",""):B;e.guardFatal?e.guardFatal(A)(e,window):e.execute(function(){A(e,window)})})(function(A,B,ta){A.register("postMetric",function(){return{postCountMetric:function(e){if("undefined"!==typeof e){var l=B.ue;if(l){var n=l.count(e)||0;l.count(e,n+1)}}},postTimeMetric:function(e,l){if("undefined"!==typeof e&&"undefined"!==typeof l){var n=B.ue;n&&n.count(e,l)}}}});"use strict";A.register("logFailedInteractionMetric",
function(){return{isEnabled:!1}});A.register("postEarlyMetric",function(){return null});"use strict";A.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(e,l,n,a){e=e.extend(!0,{},n,a);var k=new l(e);A.register("ImageBlockAPI",function(){return k.api});return k});"use strict";A.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(e,l,n){e=n.airyConfig;e.jsUrl&&A.load.js(e.jsUrl);e.cssUrl&&A.load.css(e.cssUrl)});"use strict";
A.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(e,l,n,a,k,H){var w={};return function(e){var d=this;d.dispatch=function(a,d){var e=w[a];k.isDefined(e)&&l.each(e,function(a,h){h.call(B,d)})};d.register=function(a,d){k.isDefined(w[a])||(w[a]=[]);"function"===typeof d&&w[a].push(d)};d.model=new n(e,d);d.view=new a(e,d,d.model);d.api=new H(e,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";
A.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(e,l,n){function a(a,d,h,k,c){n.isDefined(a)&&(t.type=a);n.isDefined(d)&&(t.index=d);n.isDefined(h)&&(t.thumbnailIndex=h);n.isDefined(k)&&(t.variant=k);n.isDefined(c)&&(t.color=c)}function k(h){a("image",0,0,"MAIN",h||d.landingAsinColor||d.defaultColor)}function H(d){d=d.data;C=e.copy(t);a(d.type,d.index,d.thumbnailIndex,d.variant,d.color)}function w(a){H(a);a=e.copy(a);a.data=e.copy(t);h.dispatch("updateView",a)}function q(){C=
e.copy(t);k(t.color)}var d,h,t={},C={},J,D;return function(a,l){h=l;d=a;h.register("updateSelection",w);h.register("updateModel",H);h.register("resetModel",q);this.init=function(){k()};this.getCurrentItem=function(){return e.copy(t)};this.getPreviousItem=function(){return e.copy(C)};this.setCurrentEvent=function(a){J=a};this.getCurrentEvent=function(){return J};this.setImmersiveViewModalInstance=function(a){D=a};this.getImmersiveViewModalInstance=function(){return D};this.updateTitle=function(a){d.title=
a}}});"use strict";A.when("ImageBlockBTF","postMetric").execute(function(e,l){function n(a,e,l,n,d){function h(c){"click"===c.type&&n.postCountMetric("thumbClick");"click"===c.type&&y.overrideAltImageClickAction?r.dispatch("thumbActionClick",c):r.dispatch("updateSelection",c)}function t(c){y.useClickZoom||r.dispatch("imageClick",c)}function C(c){y.useClickZoom||r.dispatch("imageHover",c)}function J(c){r.dispatch("button360Click",c)}function D(f){!l.isDefined(f)||"swatchClick"!==f.type&&"updatedData"!==
f.type?(c.update(f),"swatchHover"!==f.type&&G.getPreviousItem().thumbnailIndex!==f.data.thumbnailIndex&&n.postCountMetric(f.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",f.data)):c.render(f.data.color,!1,f.onload)}function v(c){r.dispatch("resize",c)}function I(c){l.selectThumbnail(c,m)}function N(c){var a=c.data,m;a&&"ingress"!==a.type&&"click"===c.type&&(m=c);return m}function O(c){var a=G.getCurrentItem(),m={type:"click"};m.$declarativeParent=c;m.data=a;return m}var c,
y,r,G,m;return function(f,l,n){c=this;y=f;r=l;G=n;m=e("#imageBlock #altImages ul");var q=e("#imageBlock .canvas"),b=e("#main-image-container"),g;c.subViews=[];for(l=0;l<d.length;l++)c.subViews.push(new d[l](f,n,c,r));c.render=function(a,f,d){var h=0;m.find(".item").remove();a=a||G.getCurrentItem().color;e.each(c.subViews,function(c,g){h=g.render(a,h,q,m,b,f,d)||h});var r=m.find(".a-button-selected").closest(".a-declarative");g=O(r)};c.init=function(){m=e("#imageBlock #altImages ul");var b=m.find(".a-button-selected").closest(".a-declarative"),
g=b.data("action"),b=b.data(g)||{};b.color=y.landingAsinColor||y.defaultColor;r.dispatch("updateModel",{data:b});c.render(b.color,!0);y.isDebug&&B.console&&console.log(y);r.register("updateView",D);r.register("selectThumbnail",I);"function"===typeof B.markFeatureInteractive&&B.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["click","hover"]},{name:"thumbnail",events:["click","hover"]}]});y.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter",
"mouseleave"],h);a.declarative("thumb-action",["click"],h);a.declarative("main-image-click",["click"],t);a.declarative("main-image-click",["mouseenter","mouseleave"],C);a.declarative("button-360-click",["click"],J);a.on("resize",v)};c.update=function(b){e.each(c.subViews,function(c,g){g.update(b)});y.usePeekHover&&("mouseleave"===b.type?r.dispatch("updateSelection",g):"click"===b.type&&(g=N(b)||g))}}}var a=["A","jQuery","imageBlockUtils","postMetric"].concat(e.views);A.when.apply(A,a).register("ImageBlockView",
function(){for(var a=arguments[0],e=arguments[1],l=arguments[2],q=arguments[3],d=[],h=4,t=arguments.length;h<t;h++)d.push(arguments[h]);return n(a,e,l,q,d)})});"use strict";A.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(e,l,n,a,k,H,w){function q(b,c,g,a){if(!n.isjQueryObjDefined(b.find(".a-button-selected"))){var d=f.getCurrentItem();if(!a||"chromeless-video"!==d.type||!m.autoplayVideo){a=
0;"image"===d.type&&(a=Math.max(t(d.color,d.variant),0));var p=c+a;p>=g&&(a=0,p=c);c=n.getImageHash(d.color,a,m);-1!==c&&(F.dispatch("updateModel",{data:{index:a,thumbnailIndex:p,variant:c.variant,type:"image"}}),c=b.find(".item").get(p),n.selectGivenThumbnail(l(c),b))}}}function d(b,c,g){c=m.colorImages&&m.colorImages[c];var a=b;n.isDefined(c)&&(l.each(c,function(c,g){b<m.maxAlts&&(n.createThumbnail({type:"image",index:c,thumbnailIndex:b,variant:g.variant},g.thumb,L,"imageThumbnail"),b++)}),H.isEnabled&&
w.logAltImgRequestPlacedOnThumbnails(l,H,f),q(L,a,b,g));return b}function h(b,c){if("image"===b.type){var g=l("#image-canvas-caption #canvasCaption"),a,f=m.staticStrings,d=m.colorImages,p=b.color,h=b.index;c&&m.useIV?a=f.clickToExpand:d[p]&&d[p][h].hiRes&&m.useHoverZoom?(a=m.useHoverZoomIpad?f.touchToZoom:m.useClickZoom?f.clickToZoom:f.rollOverToZoom,m.hoverZoomIndicator&&(a="\x3cimg src\x3d'"+m.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+a)):m.useIV&&(a=f.clickToExpand);g.html(a)}}function t(b,
c){return n.getIndexForVariant(b,c,m)}function C(c,g){var a="a-dynamic-image";if(!m.acEnabled){var f;l.each(c.main,function(b,c){n.isDefined(f)||(f=parseFloat(c[1]/c[0])<=parseFloat(m.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});a+=f}var d=n.getMaxDimensionsOfMainImage(c.main,b,m),p=d[0],h=d[1],d=l("\x3cdiv\x3e\x3c/div\x3e"),p={"max-height":p,"max-width":h};d.addClass(a).css(p).attr({"data-old-hires":c.hiRes,"data-a-manual-replacement":"true",onload:g}).data("a-dynamic-image",c.main);
return d}function J(b){var c=x.find(".swatchHoverExp");b=C(b);c.find(".imgTagWrapper").html(b);e.loadImageManually(b);return c}function D(c){var g=b.css("height");null!==g&&c.find(".imgTagWrapper").css("height",g);c.addClass("selected");m.imgTagWrapperClasses&&c.find(".imgTagWrapper").addClass(m.imgTagWrapperClasses)}function v(b,c){if("image"===b.type||"unavailable"===b.type||"lazy-loaded"===b.type){var g=n.getImageHash(b.color,b.index,m);if(-1===g)return g={data:{index:0,thumbnailIndex:0,variant:"",
type:"unavailable"}},n.lazyLoadingRequired(b,f,m)?O(b,!1,c):(F.dispatch("updateModel",g),n.showUnavailable(b.color)),-1;var a=x.find(".item.itemNo"+b.thumbnailIndex);if(!n.isjQueryObjDefined(a)){var a=b.thumbnailIndex,a=x.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+a+" maintain-height"),d=C(g,c);a.find(".placeHolder").replaceWith(d);x.find(".list").append(a);e.loadImageManually(d)}D(a);F.dispatch("loadMagnifier");h(b);m.useIV&&n.isDefined(g.hiRes)&&
a.css("cursor","pointer");b.isUserGenerated&&(a=f.getPreviousItem(),d=b.variant,n.isDefined(d)&&a.thumbnailIndex!==b.thumbnailIndex&&(H.isEnabled&&w.logAltImgRequestServed(H),k.postCountMetric("ImageThumbnailSelectedVariant:"+d),0===d.indexOf("IG")&&(k.postCountMetric("IGImageSelectedVariant:"+d),k.postCountMetric("IGImageSelectedEvent:"+b.interaction))));e.trigger("dp:image-block:update",g)}}function I(b){var c=Math.max(t(b.color,f.getCurrentItem().variant),0),c=n.getImageHash(b.color,c,m);if(-1===
c)return n.lazyLoadingRequired(b,f,m)?n.lazyLoadOnHoverEnabled(m)&&(N(".3",!0),n.spinner(x,!0),e.delay(function(){f.getCurrentEvent().data===b&&O(b,!0)},500)):n.showUnavailable(b.color),-1;var g=J(c);D(g);e.trigger("dp:image-block:update",c)}function N(b,c){c?x.css("opacity",b):l("#imageBlock").css("opacity",b)}function O(b,d,p){g=d;E=p;var h=b.color,e=m.colorToAsin[h];if(e&&e.asin){var r={};r.params={asin:e.asin,productGroupID:m.productGroupID,color:h};r.success=function(a){a?(n.ajaxState(e.asin,
"success"),m.colorImages[h]=a.colorImage,n.isDefined(m.spin360ColorEnabled)&&(m.spin360ColorEnabled[h]=a.enable360),h===b.color&&(d&&g?b===f.getCurrentEvent().data&&(c(b),I(b)):(a={type:"updatedData",data:f.getCurrentItem(),onload:p||E},F.dispatch("updateView",a))),A.register(n.rankedImagesReadyEvent(e.asin))):n.ajaxState(e.asin,"fail")};r.error=function(){n.ajaxState(e.asin,"fail")};r.indicator=n.spinner(x);n.ajaxState(e.asin,void 0)&&"fail"!==n.ajaxState(e.asin,void 0)||(N(".3",d),a.load("/gp/product/features/apparel-main-image/ranked-images.html",
r),n.ajaxState(e.asin,"sent"));return m.colorImages&&m.colorImages[h]}}function c(b,c){n.lazyLoadingRequired(b,f,m)||(l("#imageBlock").css("opacity","1"),x.css("opacity","1"),n.spinner(x,!1),x.find("li").removeClass("selected"),l("#image-canvas-caption #canvasCaption").empty(),n.hideUnavailable(),c&&x.find(".list .item").remove())}function y(){var c=x.find(".item .imgTagWrapper"),a=n.getContainerHeight(b,m.holderRatio,m.holderMaxHeight);0<a&&(b.height(a),c.height(a));x.find("img.a-dynamic-image").each(function(){var c=
l(this);c.data("a-manual-replacement")&&e.loadDynamicImage(this);var a=c.data("a-dynamic-image"),a=n.getMaxDimensionsOfMainImage(a,b,m);c.css({"max-height":a[0]+"px","max-width":a[1]+"px"})})}function r(b){h(f.getCurrentItem(),"mouseenter"===b.type)}var G,m,f,F,L,x,b,g,E,p;return function(a,g,h,e){G=this;m=a;f=g;F=e;m.colorImages[m.landingAsinColor]=m.colorImages[m.defaultColor];G.render=function(a,g,h,e,r,E,k){x=h;L=e;b=r;p=d(g,a,E);E||(a=f.getCurrentItem(),n.lazyLoadingRequired(a,f,m)&&F.dispatch("updateModel",
{data:{type:"lazy-loaded"}}));c(f.getCurrentItem(),!E);v(f.getCurrentItem(),k);return p};G.update=function(b){var a=b.data;f.setCurrentEvent(b);"ingress"!==a.type&&c(b.data,!1);"swatchHover"===b.type?a.color===f.getCurrentItem().color?v(f.getCurrentItem()):b.captured||-1===I(a)||(b.captured=!0):"image"===a.type&&(a.interaction=b.type,a.isUserGenerated=!0,"mouseenter"===b.type&&k.postCountMetric("dpcc_imageThumbHovered_"+(a.thumbnailIndex+1)+"_"+p),v(a),m.usePeekHover&&"click"!==b.type||(n.selectGivenThumbnail(b.$declarativeParent,
L),"click"===b.type&&k.postCountMetric("dpcc_imageThumbClicked_"+(a.thumbnailIndex+1)+"_"+p)))};F.register("imageHover",r);F.register("resize",y)}});"use strict";A.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",function(e,l,n,a,k,H){function w(a){N?a.css("cursor","url('"+C.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function q(a){var c=
a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(n.isDefined(c))for(var c=c[1].split("_"),d=0;d<c.length;d++){var h=c[d].match(/^([A-Z]+)(\d+(\.\d+)?)$/);n.isDefined(h)&&(a[h[1]]=parseInt(h[2],10))}return a}function d(d,c){function h(){var a;c.useClickZoom?(a=c.offsetInClickZoom,a=[Math.min(1,Math.max(0,E[0]-(v[0]+a))/(v[2]-2*a)),Math.min(1,Math.max(0,E[1]-(v[1]+a))/(v[3]-2*a))]):a=g&&g.updatePosition();if(a&&b&&b.detailSize){var d=[b.detailSize[0]-b.rect.width,b.detailSize[1]-b.rect.height];
e.capabilities.rtl?b.detailImage.get(0).style.right=-(a[0]*d[0])+"px":b.detailImage.get(0).style.left=-(a[0]*d[0])+"px";b.detailImage.get(0).style.top=-(a[1]*d[1])+"px"}}function r(b){var a=Q?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:"";E=Q?[a.pageX,a.pageY]:[b.pageX,b.pageY];if(e.capabilities.rtl){var c=l(B).width();E=Q?[c-a.pageX,a.pageY]:[c-b.pageX,b.pageY]}}function G(b){Q&&b.preventDefault();r(b);if(c.useClickZoom)b=[v[0],v[1],v[0]+v[2],v[1]+v[3]];else{var f=g?g.offset:d.offsetParent().offset();
b=[p[0]+f.left,p[1]+f.top,p[0]+p[2]+f.left,p[1]+p[3]+f.top];C.acEnabled&&(b=[f.left,f.top,d.offsetParent().width()+f.left,d.offsetParent().height()+f.top])}E[0]<b[0]||E[1]<b[1]||E[0]>=b[2]||E[1]>=b[3]||C.acEnabled&&!d.offsetParent().hasClass("a-dynamic-image-container")?(c.fadeMagnifier?ea||(ea=!0,ba=setTimeout(function(){m(!0)},500)):c.useClickZoom||m(),A&&(A=!1,clearTimeout(fa))):(A||(A=!0,fa=setTimeout(function(){a.postCountMetric("dppc_hoverZoomOpened");k.isEnabled&&H.logHoverZoomRequestServed(k)},
1E3)),c.fadeMagnifier&&ea&&(ea=!1,clearTimeout(ba)),h())}function m(a){a&&t.suppressMagnifier(!0);if(J&&(b&&b.hide(),g&&(g.destroy(),g=null),J=!1,Q?(d.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),l(document).trigger("disengaged.magnifier")):l(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),F(),a))d.one("click.magnifier touchstart.magnifier",function(b){f(b,!0)})}function f(f,e){e&&t.suppressMagnifier(!1);if(!J&&!R&&(0===U&&(a.postCountMetric("dppc_hoverTime",
new Date-(B.ue&&B.ue.t0||0)),U=1),da[T]||(a.postCountMetric("dppc_hoverMain"),da[T]=1),p=[d.position().left,d.position().top,d.width(),d.height()],T&&(r(f),b?b.refit().show():b=new la,c.useClickZoom||(g=g||new ha),v=b.getWindowSize(),h()),J=!0,Q?(d.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",G).bind("touchend.magnifier",m),l(document).trigger("engaged.magnifier")):(C.acEnabled?d.offsetParent().unbind("mousemove.magnifier"):d.unbind("mousemove.magnifier"),l(document).trigger("engaged.magnifier").bind("mousemove.magnifier",
G)),e)){var E=l("#zoomWindow");if(0<E.length)E.one("click.magnifier touchend.magnifier",function(b){m(!0)})}}function F(){c.useHoverZoom&&(Q?d.bind("touchstart.magnifier touchmove.magnifier",f):C.acEnabled?d.offsetParent().bind("mousemove.magnifier",f):d.bind("mousemove.magnifier",f))}var t=this,D={detailImageUrl:d.attr("data-old-hires"),location:"over",locationElement:d,prelaod:"ready",zIndex:50,offsetInClickZoom:50};c=l.extend(D,c);c.adjustment=[10,0,-10,0];var b=null,g=null,E=null,p=null,v=null,
I={"null":1,"":1,undefined:1},J=!1,R=!1,T=c.detailImageUrl,Q=c.useHoverZoomIpad||0,U=0,da={},ha=function(){function a(c){var g=Math.round(Math.min(d.width(),b.rect.width/c));c=Math.round(Math.min(d.height(),b.rect.height/c));e.css({width:g,height:c});f=[g,c]}var g=this,f=[0,0],h=(b.detailSize&&b.detailSize[0]||5E8)/p[2],m=(b.detailSize&&b.detailSize[1]||5E8)/p[3],h=m>h?m:h;l("#magnifierLens").remove();var e=l("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});c.generalImageUrls.zoomLensBackground&&
e.css({backgroundImage:"url("+c.generalImageUrls.zoomLensBackground+")"});C.showMagnifierOnHover?w(e):e.css("cursor","pointer");g.updatePosition=function(){var b=[p[2]-f[0],p[3]-f[1]],a=0>=b[0]?.5:Math.max(0,Math.min(1,(E[0]-f[0]/2-p[0]-g.offset.left)/b[0])),c=0>=b[1]?.5:Math.max(0,Math.min(1,(E[1]-f[1]/2-p[1]-g.offset.top)/b[1])),d=p[0]+Math.round(a*b[0]),b=p[1]+Math.round(c*b[1]);e.get(0).style.left=d+"px";e.get(0).style.top=b+"px";return[a,c]};g.destroy=function(){e.remove()};g.offset=d.offsetParent().offset();
a(h);g.updatePosition();e.appendTo(d.parent());b.detailImage[0].complete||b.detailImage.load(function(){var c=b.detailImage.width()/p[2];a(c);g.updatePosition()})};ha.preload=function(){t.preload(c.generalImageUrls.lensBackgroundUrl)};var la=function(){function b(){var a={};if("over"===c.location){var a=c.useClickZoom,e={},h=l("#leftCol"),p=l("#centerCol"),E=l("#rightCol"),r=l("#hover-zoom-end"),k=l("#actionPanelContainer"),t=n.isjQueryObjDefined(h)?h.outerHeight():p.outerHeight();e.top=n.isjQueryObjDefined(h)?
h.offset().top:p.offset().top;e.bottom=t+e.top;e.right=n.isjQueryObjDefined(E)?E.offset().left:k.offset().left;e.left=a?0:h.offset().left+h.outerWidth();n.isjQueryObjDefined(r)&&r.offset().top>e.bottom&&(e.bottom=r.offset().top);a=e}else"right"===c.location&&(a=d.offset(),a={left:a.left+d.outerWidth(),top:a.top,right:a.left+d.outerWidth()+400,bottom:a.top+400});c.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+l(c.minHeightElement).outerHeight()));a.bottom=Math.min(a.bottom,l(B).scrollTop()+l(B).height());
a.left+=f[0];a.top+=f[1];a.right+=f[2];a.bottom+=f[3];a.width=a.right-a.left;a.height=a.bottom-a.top;c.enhancedHoverOverlay&&n.isDefined(B.pageXOffset)&&(e=l(B).width(),a.width=e-a.left+B.pageXOffset-18,a.height-=14);m.css({left:a.left,top:a.top,width:a.width,height:a.height});g.rect=a;return g}function a(b){var d=new Image;g.detailSize=[0,0];d.onload=function(){g.detailSize=[d.width,d.height];h()};d.src=b.attr("src");if(0<d.width&&0<d.height)g.detailSize=[d.width,d.height];else if(c.detailImageSize)g.detailSize=
c.detailImageSize;else{b=q(d.src);var f=p[2]/p[3];b.SS||b.AA?(b=b.SS||b.AA,g.detailSize=[b,b]):b.SX?g.detailSize=[b.SX,Math.round(b.SX/f)]:b.SY?g.detailSize=[Math.round(b.SY*f),b.SY]:b.SL&&(g.detailSize=1<=f?[b.SL,Math.round(b.SL/f)]:[Math.round(b.SL*f),b.SL])}}var g=this,f=c.adjustment;l("#zoomWindow").remove();var e={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:c.zIndex};c.enhancedHoverOverlay&&(e.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",e.border="1px solid #949494",e.borderColor=
"rgb(148,148,148)");var m=l("\x3cdiv id\x3d'zoomWindow' /\x3e").css(e);c.fadeMagnifier&&m.fadeIn(200);c.useClickZoom&&(N?m.css("cursor",'url("'+c.zoomOutIcon+'"), auto'):(m.css("cursor","-webkit-zoom-out"),m.css("cursor","-moz-zoom-out"),m.css("cursor","zoom-out")));g.updateImage=function(b){b=l("\x3cimg id\x3d'detailImg' src\x3d'"+b+"'/\x3e").css("position","absolute");g.detailImage&&g.detailImage.remove();m.append(b);l(document).trigger("updated.magnifier");g.detailImage=b;a(g.detailImage)};g.refit=
function(){b();a(g.detailImage);return g};c.fadeMagnifier?(g.show=function(){m.fadeIn(200);return g},g.hide=function(){m.fadeOut(200);return g}):(g.show=function(){m.show();return g},g.hide=function(){m.hide();return g});g.destroy=function(){m.remove();return g};g.getWindowSize=function(){return[g.rect.left,g.rect.top,g.rect.width,g.rect.height]};g.updateImage(T);b();m.appendTo(document.body)},ea=!1,ba,A=!1,fa;t.preload=function(b){b=l.makeArray(b);for(var a=b.length,c=0;c<a;c++)b[c]instanceof Array?
t.preload(b[c]):"string"===typeof b[c]&&b[c]&&!I[b[c]]&&(I[b[c]]=new Image,I[b[c]].src=b[c])};t.changeImage=function(a,g){J&&m();T=g;d.attr("src",a);t.preload(a);p=[d.position().left,d.position().top,d.width(),d.height()];g&&("immediately"===c.preload?t.preload(g,!0):l(B).ready(function(){t.preload(g)}),b?b.updateImage(g):d.attr("data-old-hires",g))};t.destroy=function(){d.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");C.acEnabled&&d.offsetParent().unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");
l(document).unbind("mousemove.magnifier");g&&g.destroy();g=null;b&&b.destroy();b=null};t.detailImage=function(){return b.detailImage};t.suppressMagnifier=function(b){R=b};t.isEngaged=function(){return J};t.engageMagnifier=f;t.disengageMagnifier=m;d[0].complete?F():d.one("load",F);t.preload(d.attr("src"));if(c.preload){var ca=c.detailImageUrl,D=function(){t.preload(ca,!0);c.useClickZoom||ha.preload()},V=c.preload;V.constructor!==Array&&(V=[V]);for(var z=0;z<V.length;z++)if("immediately"===V[z])D();
else if(l(B)[V[z]])l(B)[V[z]](D);else l(B).bind(V[z],D)}return t}function h(){if(C.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:C.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:C.useHoverZoomIpad,useHoverZoom:C.useHoverZoom,useClickZoom:C.useClickZoom,fadeMagnifier:C.fadeMagnifier,zoomOutIcon:C.staticImages.zoomOutCur,enhancedHoverOverlay:C.enhancedHoverOverlay||C.atfEnhancedHoverOverlay};v&&(v.destroy(),v=void 0);var c=I.find(".image.item.selected img[data-old-hires]").not("[data-old-hires\x3d'']");
n.isjQueryObjDefined(c)?C.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(e){v=new d(c,a);v.engageMagnifier(e,!0)}),N?c.css("cursor",'url("'+C.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))):v=new d(c,a):k.isEnabled&&H.logHoverZoomApplicability(l,k)}}var t,C,J,D,v,I,N=navigator.userAgent.match(/msie|trident/i);return function(a,c,d,e){t=this;C=a;J=c;k.refToModel=J;D=e;t.render=function(a,c,
d,e,h,r){I=d;v&&(v.destroy(),v=void 0)};t.update=function(a){};D.register("loadMagnifier",h);D.register("resize",h)}});"use strict";A.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(e,l,n,a){function k(d,e,k){d=(d=k?k:n.getColorFromState(e.getState().hovered_variations,q))&&""!==d?d:q.defaultColor;h.dispatch("updateView",{type:"swatchHover",data:{color:d}});a.postCountMetric("swatchHover")}function H(e,k,l,w){e=(e=w?w:n.getColorFromState(k.getState().selected_variations,
q))&&""!==e?e:q.defaultColor;e===d.getCurrentItem().color?"function"===typeof l&&l():(h.dispatch("updateSelection",{type:"swatchClick",data:{color:e},onload:l}),a.postCountMetric("swatchClick"))}var w,q,d,h;return function(a,l,n,D){w=this;q=a;d=l;h=D;e.on("image-block-twister-swatch-hover",k);e.on("image-block-twister-swatch-click",H);w.render=function(a,d,e,h,c){};w.update=function(a){}}});"use strict";A.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",
function(e,l,n,a,k,H,w){function q(b,g,d,f){!c.autoplayVideo||M||c.useChromelessVideoPlayer?!a.isjQueryObjDefined(b.find(".a-button-selected"))&&(d=y.getCurrentItem(),!f||c.prioritizeVideos||"chromeless-video"===d.type&&c.autoplayVideo)&&(f=a.getVideoHash(d.color,0,c),-1!==f&&(g+=0,r.dispatch("updateModel",{data:{index:0,thumbnailIndex:g,variant:f.variant,type:c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),g=b.find(".item").get(g),a.selectGivenThumbnail(l(g),b))):(a.selectGivenThumbnail(b.find("img:last"),
b),a.fadeToThumbnail(b.find("img").length-1,F,b))}function d(b){var g=y.getCurrentItem().color;if(c.useChildVideos&&!c.colorToVideo[g]){var d=function(){if(b){c.colorToVideo[g]=b;var a={type:"updatedData",data:y.getCurrentItem()};r.dispatch("updateView",a)}};c.lazyLoadExperienceDisabled?d():A.when(a.rankedImagesReadyEvent(c.colorToAsin[g].asin)).execute(function(){d()})}}function h(b){if(!c.useChildVideos)return a.lazyLoadingRequired(y.getCurrentItem(),y,c)?void 0:c.videos;if(c.colorToVideo[b])return c.colorToVideo[b];
var g=c.colorToAsin[b];if(g&&g.asin){var f={};f.params={asin:g.asin,productGroupID:c.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:c.useChromelessVideoPlayer,isUDP:c.isUDP};c.isDPXFeatureEnabled||(f.success=function(b){d(b)},k.load("/gp/product/features/apparel-main-image/videos.html",f));return c.colorToVideo&&c.colorToVideo[b]}}function t(){r.dispatch("selectThumbnail",a.useTabbedImmersiveView(c)?1:0)}function C(b,c,g,d){return n.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],
streamingUrls:c.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var c=a.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";H.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){t();H.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){t();H.postCountMetric("dppc_chromelessVideo:ERROR")},
ended:function(){x.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,c,g){a=g.durationSeconds-g.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});t();l(this).show().css("opacity",1)})}}]})}function J(d){if("chromeful-video"===d.type||"chromeless-video"===d.type){var h=a.getVideoHash(d.color,d.index,c);if(-1===h)return-1;if("chromeful-video"===
d.type){d=F.width()/F.height();var E=parseInt(h.videoWidth,10),r=parseInt(h.videoHeight,10);a.updateAspectRatio(d,E,r,m);x?(x.show(),a.loadMediaIntoAiry(x,h,b,c.tabletWeb)):x=c.tabletWeb?p:a.createAiryInstanceForChromeful(m,h,b,null,c.autoplayVideo,F,f,G);b:if(a.useTabbedImmersiveView(c)){if(1<a.getVideosCount(y.getCurrentItem().color,c)){if(a.isDefined(L)){f.show();break b}L=l('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(c.staticStrings.watchMoreVideos);f.find("#videoCaption").append(L);
e.declarative.create(L,"videoIngressClick",g)}a.playVideoInImmersiveView(c,y.getCurrentItem().color)&&(e.declarative.create(m,"videoIngressClick",g),m.children().css("z-index","-1"),m.css("display","inline-block"))}else f.find("#videoCaption").text(c.staticStrings.playVideo),f.show();h=x;c.autoplayVideo&&h&&!M&&(a.toggleVideoCaption(f),h.setVolume(0),h.show(),h.play(),M=!0)}else x?(x.show(),a.loadMediaIntoAiry(x,h,b,c.tabletWeb),x.play(),f.show()):(x=C(m,h,b))&&x.play()}}function D(b,d,f){var e=h(d);
d=b;a.isDefined(e)&&0<e.length&&c.alwaysIncludeVideo&&b===c.maxAlts&&(G.find(".item:last").remove(),b--);a.isDefined(e)&&(l.each(e,function(d,f){if(b<c.maxAlts){var h=c.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",m={type:h,index:d,thumbnailIndex:b,variant:f.variant};g={type:"video-ingress",index:d,thumbnailIndex:b,variant:f.variant};a.useTabbedImmersiveView(c)&&("chromeful-video"===h&&(K+=" videoBlockIngress  videoBlockDarkIngress",f.thumb=f.thumb.replace("_PKmb-play-button-overlay-thumb",
"")),c.altsOnLeft||(K+=" a-align-top"));a.createThumbnail(m,f.thumb,G,K);if(a.useTabbedImmersiveView(c)){v(G.find(".videoBlockIngress img"),c.videoIngressATFSlateThumbURL);var m=1<e.length?"multiple-videos":"one-video",p=1<e.length?e.length+" "+c.staticStrings.multipleVideos:c.staticStrings.singleVideo;p&&G.find(".videoBlockIngress").append(G.find("#videoCount_template").clone().text(p).attr("id","videoCount")).addClass(m)}Z||(Z=!0,H.postCountMetric("chromeless-video"===h?"dppc_chromelessVideoAvailable":
"dppc_chromefulVideoAvailable"));b++}if(a.useTabbedImmersiveView(c))return!1}),q(G,d,b,f));return b}function v(b,a){var c=b.attr("src");if(c&&a){b.attr("src",a);var g=new Image;g.onload=function(a){b.attr("src",c)};g.src=c}}function I(b){x&&x.pause();b.data=g;b.clickTimeStamp=b.$event.timeStamp;var a="a"===b.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";r.dispatch("imageClick",b);H.postTimeMetric("dpcc_vse_videoingressclick",b.$event.timeStamp);H.postCountMetric(a)}function N(b){p=b.airy;
p.hide=function(){p.pause();e.$("#main-video-container").find(".vse-airy-container").hide()};p.show=function(){e.$("#main-video-container").find(".vse-airy-container").show();p.play()};p.getMediaSourceInfo=function(){return a.getMediaSourceInfo()}}var O,c,y,r,G,m,f,F,L,x,b,g,E,p,Z=!1,M=!1,K="videoThumbnail";return function(h,p,k,n){O=this;c=h;y=p;r=n;b=c.airyConfig;c.colorToVideo={};c.colorToVideo[c.landingAsinColor]=c.colorToVideo[c.defaultColor]=c.videos;O.render=function(b,g,d,h,p,r){G=h;m=p.find("#main-video-container");
f=m.parent().find("#video-canvas-caption");F=l("#main-image-container");c.useChromelessVideoPlayer||m.addClass("chromeful-container");E=D(g,b,r);J(y.getCurrentItem());a.useTabbedImmersiveView(c)&&e.declarative("videoIngressClick",["click"],I);b=y.getCurrentItem().color;g=a.getVideoHash(b,0,c);-1!==g&&c.tabletWeb&&(b=a.getNilgiriServiceAjaxRequest(c,b,g),w.get(e,"#main-video-container",b,function(){e.$("#main-video-container").find(".vse-airy-container").hide()},function(){e.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));
return E};O.update=function(b){var d=b.data;"ingress"!==d.type&&x&&(x.hide(),m.parent().css("z-index",-1),f.hide());if("swatchHover"===b.type)d.color===y.getCurrentItem().color?J(y.getCurrentItem()):b.captured||a.lazyLoadingRequired(d,y,c)&&!a.lazyLoadOnHoverEnabled(c)&&J(y.getCurrentItem());else if("chromeful-video"===d.type||"chromeless-video"===d.type)"mouseenter"===b.type&&H.postCountMetric("dpcc_videoThumbHovered_"+(d.thumbnailIndex+1)+"_"+E),J(d),c.usePeekHover&&"click"!==b.type||(a.selectGivenThumbnail(b.$declarativeParent,
G),"click"===b.type&&a.useTabbedImmersiveView(c)&&(H.postCountMetric("dpcc_videoThumbClicked_"+(d.thumbnailIndex+1)+"_"+E),g.action="videoIngressClick",g.clickTimeStamp=b.$event.timeStamp,r.dispatch("videoIngressClick",g),H.postTimeMetric("dpcc_vse_videoingressclick",b.$event.timeStamp)))};if(c.isDPXFeatureEnabled)e.on("triggerVideoAjax",d);e.on("vseAiry",N)}});"use strict";A.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric",
"imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",function(e,l,n,a,k,H,w,q,d,h){function t(b){return b.hiRes||b.large||b.main[b.main.length-1]}function C(){u.find("#ivTitle").click(function(){ia.hide()})}function J(){P=Pa?{type:"360-spin"}:W.getCurrentItem()}function D(){var b=u.find("#ivStage"),a=ia.$container.find(".a-popover-wrapper"),g=a.find(".a-popover-inner"),a=a.height()-h.getDimension(g,"padding-top")-h.getDimension(g,"padding-bottom");u.css("height",a);var g=u.find("#ivTitle").outerHeight(!0),
c=u.find("#ivVariationSelection").outerHeight(!0),d=u.find("#ivMediaSelection").outerHeight(!0),f=u.find("#ivThumbs"),e=h.getDimension(f,"margin-top")+h.getDimension(f,"margin-bottom");f.css("height",a-g-c-d-e);u.find("#ivLargeImage").css("height",a);b.css("width",u.width()-h.getDimension(u,"padding-left")-h.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-h.getDimension(b,"margin-left")-h.getDimension(b,"margin-right"))}function v(){u.find("#ivMediaSelect").change(function(){var b=
a(this).val();"all"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===P.type&&u.find("#ivVideo_"+P.index).click()):"images"===b?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===P.type&&(0===aa&&0===X?u.find("#iv360").click():0===aa?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===b&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==
P.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+P.index).click())})}function I(){var b=u.find("#ivStage").find("#ivLargeImage"),a=b.width(),g=b.height(),c=b.find(".fullscreen");c.removeAttr("style");var d=c.width(),f=c.height();0<c.length&&(c[0].naturalWidth&&(d=c[0].naturalWidth),c[0].naturalHeight&&(f=c[0].naturalHeight));b.css("cursor","auto");var d=0===d?1:d,f=0===f?1:f,e=Math.min(a/d,g/f),h=f*e,m=d*e;1>e?(Qa?b.css("cursor","url('"+z.staticImages.zoomIn+"'), auto"):(b.css("cursor",
"-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in")),Ba=!0):Ba=!1;d=Math.min(m,d);f=Math.min(h-20,f);c.css({"margin-top":(g-f)/2,"margin-left":(a-d)/2,height:f,width:d});b.css("visibility","visible");Ca=!1}function N(b){var a=u.find("#ivLargeImage");a.css("visibility","hidden");a.empty();h.animateStageIn(a);a.append(b);I()}function O(){Y&&Y.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display",
"none");F()}function c(b){O();u.find("#ivLargeImage").css("display","block");var c;"hero-image"===b?k.isDefined(ga)&&(c=t(ga[P.index])):k.isDefined(na)&&(c=t(na[P.index]));if(k.isDefined(c)){u.find(".fullscreen").remove();var g=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),d=u.find("#ivLargeImage");h.animateStageOut(d,function(){g.load(function(){N(g)});if(g[0].complete)N(g);else{d.empty();var b=(d.height()-104)/2,c=(d.width()-80)/2;a("\x3cimg\x3e").attr("src",z.staticImages.spinner).css({position:"relative",
top:b+"px",left:c+"px"}).appendTo(d)}})}}function y(){var b=parseInt(P.index,10)+1;b>=ma.length||u.find("#ivVideo_"+b).click()}function r(){var b;k.isDefined(ma)&&(b=ma[P.index]);if(k.isDefined(b)){O();var a=u.find("#ivLargeVideo").css("display","block");Y?(Y.isDetached()&&Y.attach(a[0]),k.loadMediaIntoAiry(Y,b,ya,z.tabletWeb),Y.show()):(Y=k.createAiryInstanceForChromeful(a,b,ya,"ImmersiveView"),ya.enableContinuousPlay&&Y.bind("ended",y));Y.play({isAsync:!0})}}function G(){J();var b;b="hero-image"===
P.type?u.find("#ivHeroImage_"+P.index):"image"===P.type?u.find("#ivImage_"+P.index):"chromeful-video"===P.type||"chromeless-video"===P.type?u.find("#ivVideo_"+P.index):"360-spin"===P.type?u.find("#iv360"):k.isDefined(ga)?u.find("#ivHeroImage_"+P.index):u.find("#ivImage_"+P.index);k.isjQueryObjDefined(b)||(b=u.find("#ivImage_0"));m(b)}function m(b){u.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")?(P.type="chromeful-video",P.index=b.attr("id").split("_")[1],
r()):b.hasClass("ivHeroImage")?(P.type="hero-image",P.index=b.attr("id").split("_")[1],c(P.type)):b.hasClass("iv360Image")?(P.type="360-spin",P.index=0,f()):(P.type="image",P.index=b.attr("id").split("_")[1],c(P.type))}function f(){O();u.find("#ivLarge360").css("display","block");E();var b=u.find("#ivLarge360");b.css({opacity:0});setTimeout(function(){b.css({opacity:.4});h.animateStageIn(b)},200);x();w.postCountMetric("dppc_click360");ua=Date.now()}function F(){0<ua&&(L("dppc_duration360",Date.now()-
ua),ua=0)}function L(b,a){B.ue&&B.ue.count(b,a)}function x(){if(0<ra){var b=u.find(".iv360Hint");b.removeClass("iv360HintFaded");b.animate({opacity:1},200)}}function b(c,g){if(ra<c.length){var d=a("\x3cimg /\x3e").css({display:"block",width:6*oa+"px",height:va+"px"});d.hide();g.append(d);d.get(0).onload=function(){g.closest(document.documentElement).length&&(ra++,1===ra&&(x(),0<ua&&L("dppc_loadTime360",Date.now()-ua)),0<Ia&&L("dppc_perSpriteloadTime360",Date.now()-Ia),u.find("#iv360Spinner").hide(),
d.show(),za=5*S.imageLocations[Math.floor(Aa/S.imageLocations[0].length)][Aa%S.imageLocations[0].length],b(c,g))};d.attr("src",c[ra].replace(/(\._SP)\d+(,)\d+/,"$1"+wa+"$2"+xa));Ia=Date.now()}}function g(b){if(k.isDefined(S.spriteWidthSizes)&&0<S.spriteWidthSizes.length){var a=S.spriteWidthSizes,c=a.length,g=a[0],d=a[c-1];if(b<=g)return g;if(b>d)return d;for(g=0;g<c;g++)if(b>a[g]&&b<=a[g+1])return a[g+1]}else return b}function E(){var b=u.find("#ivLarge360");b.children("#image-360-sprites").length||
(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",z.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ja=!0,p())}function p(){if(k.isDefined(S.spriteURLs)&&
k.isDefined(u)&&Ja&&!Ka){var c=u.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});k.isDefined(S.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",S.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(z.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=S.imageWidth,f=S.imageHeight,e=c.parent().width(),h=c.parent().height(),
m=0,p=0;d/f>e/h?(wa=g(e),xa=Math.round(f/d*wa),oa=Math.ceil(e),va=Math.ceil(xa/wa*e),p=(h-va)/2):(xa=g(h),wa=Math.round(d/f*xa),va=Math.ceil(h),oa=Math.ceil(wa/xa*h),m=(e-oa)/2);c.css({"margin-left":m,"margin-top":p,width:oa+"px",height:va+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*oa+"px");b(S.spriteURLs,u.find("#image-360-sprites"),0);d=u.find("#ivLarge360");d.bind("mousedown",A);d.bind("touchstart",Z);d.bind("touchmove",M);d.bind("touchend",K);a(document).bind("mousemove",
T);a(document).bind("mouseup",Q);k.isDefined(z.staticImages.grab)&&c.css("cursor","url('"+z.staticImages.grab+"'), auto");Ka=!0}}function Z(b){Da=!0;La=b.originalEvent.targetTouches[0].clientX}function M(b){Da&&(U(b.originalEvent.targetTouches[0].clientX-La),La=b.originalEvent.targetTouches[0].clientX)}function K(b){Da&&(Da=!1)}function A(b){Ea=!0;Ma=b.originalEvent.clientX;k.isDefined(z.staticImages.grabbing)&&(b=u.find("#ivLarge360"),b.css("cursor","url('"+z.staticImages.grabbing+"'), auto"),b.parents(".a-declarative").last().css("cursor",
"url('"+z.staticImages.grabbing+"'), auto"));return!1}function T(b){Ea&&(U(b.originalEvent.clientX-Ma),Ma=b.originalEvent.clientX)}function Q(b){Ea&&(Ea=!1,k.isDefined(z.staticImages.grab)&&(b=u.find("#ivLarge360"),b.css("cursor","url('"+z.staticImages.grab+"'), auto"),b.parents(".a-declarative").last().css("cursor","auto")))}function U(b){for(b=za-=b/oa*180;0>b;)b+=360;for(;360<b;)b-=360;za=b;var a;b=360;for(var c=0;c<ra;c++)for(var g=0;g<S.imageLocations[c].length;g++){var d=Math.abs(za-5*S.imageLocations[c][g]);
d<b&&(b=d,a=c*S.imageLocations[0].length+g)}a!==Aa&&(b=Math.floor(a/S.imageLocations[0].length),b!==Math.floor(Aa/S.imageLocations[0].length)&&(k.isDefined(Na)||(Na=document.createElement("canvas").getContext("2d")),c=u.find("#image-360-sprites").children(),Na.drawImage(c[b],0,0)),b=u.find(".iv360Hint").not(".iv360HintFaded"),k.isDefined(b)&&(b.addClass("iv360HintFaded"),b.animate({opacity:0},750)));Aa=a;b=a%S.imageLocations[0].length*-1*oa;a=-1*Math.floor(a/S.imageLocations[0].length)*va;c=u.find("#ivLarge360").children("#image-360-sprites");
c.css("-webkit-transform","translate3d("+b+"px, "+a+"px, 0)");c.css("transform","translate3d("+b+"px, "+a+"px, 0)")}function da(){u.delegate(".ivThumb","click",function(){var b=a(this);m(b)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");P.type="chromeful-video";P.index=b.attr("id").split("_")[1];r()})}function ha(){Y&&!Y.isDetached()&&(ya.volume=Y.getVolume(),Y.detach(),!document.all||B.atob||document.addEventListener||
(Y=null));u.find("#ivLargeImage").empty();F()}function la(b,a){return 0<a?a/2:Math.min(0,Math.max(a,b))}function ea(b){var c=sa.left-(b.pageX-Fa[0])*Ga;e.capabilities.rtl&&(c=sa.left-(a(B).width()-b.pageX-Fa[0])*Ga);b=sa.top-(b.pageY-Fa[1])*Ga;c=la(c,Ha.left);b=la(b,Ha.top);u.find(".fullscreen").css({left:c,top:b})}function ba(){u.delegate("#ivLargeImage","click",function(b){if(Ca)I();else if(Ba){u.find(".fullscreen").removeAttr("style");if(Ba){var a=u.find("#ivLargeImage"),c=a.find(".fullscreen");
Qa?a.css("cursor","url('"+z.staticImages.zoomOut+"'), auto"):(a.css("cursor","-webkit-zoom-out"),a.css("cursor","-moz-zoom-out"),a.css("cursor","zoom-out"));Ca=!0;var g=u.find("#ivLargeImage");Ha.left=g.width()-c.width();Ha.top=g.height()-c.height();var g=a.height()/2,d=a.width()/2;Fa=[a.offset().left+d,a.offset().top+g];sa.top=g-c.height()/2;sa.left=d-c.width()/2;c.css({position:"relative",left:sa.left,top:sa.top});Ga=Math.max(c.height()/a.height(),c.width()/a.width())}ea(b)}});u.delegate("#ivLargeImage",
"mousemove",function(b){Ca&&ea(b)})}function ja(b){if(k.isImmersiveViewEnabled(z,W.getCurrentItem().color)){Pa=k.isDefined(b)&&"button-360-click"===b.action;q.isEnabled&&d.logImmersiveViewRequestServed(q);w.postCountMetric("dppc_immersiveViewOpened");if(k.isDefined(ia))ia.show();else{b=a("#auiImmersiveViewDiv");var c=a(B).height()-150,g=a(B).width()-75;ia=l.create(b,{name:"immersiveView",activate:"onclick",width:g,height:c,popoverLabel:"ImmersiveView",hideHeader:!0});b.click()}if(Oa){u=a("#ivMain");
b=W.getCurrentItem().color;na=z.colorImages[b];ga=z.heroImage[b];ma=z.useChildVideos?z.colorToVideo[b]:z.videos;ta=ca()&&z.spin360ColorEnabled[b];S=ca()?z.spin360ColorData[b]:void 0;J();ka=X=qa=aa=0;k.isDefined(ga)&&(X=ga.length);k.isDefined(na)&&(aa=na.length);k.isDefined(ma)&&(qa=ma.length);ta&&(ka=1);h.populateTitle(u.find("#ivTitle"),45,z);h.populateVariationSelection(u.find("#ivVariationSelection"));b=u.find("#ivMediaSelect");0===aa+ka||0===qa?(b.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):
(b.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(z.staticStrings.allMedia+" ("+(X+aa+ka+qa)+")").appendTo(b),a("\x3coption/\x3e").attr("value","images").text(z.staticStrings.images+" ("+(X+aa+ka)+")").appendTo(b),a("\x3coption/\x3e").attr("value","videos").text(z.staticStrings.videos+" ("+qa+")").appendTo(b),b.parent().show(),b.val("all"));b=u.find("#ivThumbs");b.find(".ivRow").not(".placeholder").remove();for(var c=X+aa+qa+ka,f=g=0;g<c;)for(var m=b.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(b),
p=0;3>p&&g<c;p++,g++,f++)if(f<X){var E=ga[g].thumb,r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(m);r.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(E)+'") center no-repeat')}else if(f>=X&&f<aa+X)E=na[g-X].thumb,r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(g-X)).appendTo(m),r.find(".ivThumbImage").css("background",'url("'+h.getResizedThumbnailURL(E)+
'") center no-repeat');else if(f>=X+aa&&f<aa+X+ka)r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(m),r.find(".ivThumbImage").css("background",'url("'+(k.isDefined(z.staticImages.icon360)?h.getResizedThumbnailURL(z.staticImages.icon360,!0):"")+'") center no-repeat');else if(E=ma[g-aa-X-ka],r=b.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(g-aa-X-ka)).appendTo(m),r.find(".ivThumbImage").css("background",
'url("'+E.thumbUrl+'") center no-repeat'),k.isDefined(E)){var n={position:"triggerTop"},t=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");t.find(".ivVideoPopoverTitle").text(E.title);t.find(".ivVideoPopoverDuration").text(E.durationTimestamp);n.inlineContent=t[0];e.declarative.create(r,"a-tooltip",n)}b=u.find("#ivVideoList");b.find(".ivThumbVideoListOuter").not(".placeholder").remove();c=b.find(".placeholder");for(g=0;g<qa;g++)f=ma[g],m=c.clone().removeClass("placeholder").appendTo(b),
m.attr("id","ivVideoList_"+g),m.find(".ivThumbImage").css("background",'url("'+f.thumbUrl+'") center no-repeat'),m.find(".ivThumbTitle").text(f.title),m.find(".ivThumbDuration").text(f.durationTimestamp);u.find("#ivLarge360").empty();ra=0;Ka=Ja=!1;ya=z.airyConfig;Oa=!1;Ra()}}}function fa(b){var a=z.colorToAsin[b],c={},g=500;if(a&&a.asin){c.params={asin:a.asin};var d="360"+a.asin,f=Date.now();c.success=function(a){L("dppc_asyncRequestTime360",Date.now()-f);a&&k.isDefined(a.spin360.spin360Model)?(k.ajaxState(d,
"success"),z.spin360ColorData[b]=a.spin360.spin360Model,b===W.getCurrentItem().color&&(S=z.spin360ColorData[b],p())):c.error()};c.error=function(){w.postCountMetric("dppc_asyncFailed360");L("dppc_asyncRequestTime360",Date.now()-f);g*=2;16E3>=g?setTimeout(function(){f=Date.now();H.load("/gp/product/features/apparel-main-image/360.html",c)},g):k.ajaxState(d,"fail")};k.ajaxState(d)&&"fail"!==k.ajaxState(d)||(H.load("/gp/product/features/apparel-main-image/360.html",c),k.ajaxState(d,"sent"))}}function ca(){return k.isDefined(z.spin360ConfigEnabled)&&
z.spin360ConfigEnabled}var V,z,W,pa,ia,u,ga,na,ma,X,aa,qa,ka,P,Y,ya,S,ta,oa,va,xa,wa,Ma,La,Pa=!1,Ja=!1,Ka=!1,za=0,Aa=0,ua=0,Ia=0,Ea=!1,Da=!1,ra=0,Na,Qa=navigator.userAgent.match(/msie|trident/i),Oa=!0,Ca=!1,Ba=!1,Ha={},sa={},Ga,Fa,Ra=e.once(function(){v();da();ba();e.on("a:popover:afterUpdatePosition:immersiveView",D);e.on("a:popover:afterShow:immersiveView",G);e.on("a:popover:afterHide:immersiveView",ha);C()});return function(b,c,g,d){V=this;z=b;W=c;q.refToModel=W;pa=d;ca()&&(z.spin360ColorData[z.landingAsinColor]=
z.spin360ColorData[z.defaultColor],z.spin360ColorEnabled[z.landingAsinColor]=z.spin360ColorEnabled[z.defaultColor]);k.isDefined(z.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",h.addStyleCodeToURL(z.staticImages.icon360,"_FMpng_RI_"));V.render=function(b,a,c,g,d,f){Oa=!0;ca()&&z.spin360ColorEnabled[b]&&!k.isDefined(z.spin360ColorData[b])&&(z.spin360ColorData[b]={},fa(b));k.isImmersiveViewEnabled(z,W.getCurrentItem().color)&&ca()&&z.spin360ColorEnabled[b]&&
(a===z.maxAlts&&(b=g.find(".item.imageThumbnail"),c=g.find(".item.videoThumbnail"),k.isDefined(c)&&1<c.length?c.last().remove():b.last().remove(),a--),b=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),e.declarative.create(b,"button-360-click"),g.append(b),a++,w.postCountMetric("dppc_display360"));return a};V.update=function(b){};pa.register("imageClick",ja);pa.register("button360Click",ja)}});"use strict";A.when("A","a-modal","a-tooltip",
"jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(e,l,n,a,k,H,w,q,d,h){function t(){var d=I.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),f=d.find(".a-popover-inner"),d=d.height()-h.getDimension(f,"padding-top")-h.getDimension(f,"padding-bottom");a("#iv-tab-view-container").css("height",d);c=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==
a(this).css("display")}).length;1<c?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),f=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),d-=f):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",d);e.trigger("dp:image-block:immersive-view:resize")}function C(){e.trigger("dp:image-block:immersive-view:reset")}function J(c){if(k.isImmersiveViewEnabled(v,I.getCurrentItem().color)){q.isEnabled&&d.logImmersiveViewRequestServed(q);
w.postCountMetric("dppc_immersiveViewOpened");k.isDefined(c)&&("button-360-click"===c.action?a("#iv360TabHeading").click():"videoIngressClick"===c.action?(y=c.clickTimeStamp,a("#ivVideosTabHeading").click()):a("#ivImagesTabHeading").click());var f=I.getImmersiveViewModalInstance();if(k.isDefined(f))f.show();else{c=a("#auiImmersiveViewDiv");var f=Math.min(Math.max(a(B).height()-150,540),1080),h=Math.min(Math.max(a(B).width()-75,990),1980),f=l.create(c,{name:"immersiveView",activate:"onclick",width:h,
height:f,popoverLabel:"ImmersiveView",hideHeader:!0});I.setImmersiveViewModalInstance(f);c.click()}O&&(O=!1,r(),e.trigger("dp:image-block:immersive-view:init"))}}var D,v,I,N,O=!0,c=0,y,r=e.once(function(){e.on("a:popover:afterUpdatePosition:immersiveView",t);e.on("a:popover:afterShow:immersiveView",t);e.on("a:popover:afterHide:immersiveView",C)}),G=e.once(function(){var c=a("#iv-tab-view-container ul.iv-tab-views li");c.bind("click",function(d){var h=c.filter(".iv-active");h.attr("id")!==a(this).attr("id")&&
e.trigger("dp:ivTabs:"+h.find("a").attr("data-iv-tab-view")+":deselect",d);c.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();h=a(this).find("a").attr("data-iv-tab-view");a("#"+h).show();"ivVideosTab"===h&&(d.clickTimeStamp=y||d.timeStamp);e.trigger("dp:ivTabs:"+h+":select",d);w.postCountMetric("dppc_"+h);return!1})});return function(a,c,d,h){D=this;v=a;I=c;q.refToModel=I;N=h;D.render=function(a,b,c,d,f,h){w.postCountMetric("dpcc_altThumbs_"+
b);O=!0};D.update=function(a){};D.getTitle=function(){};D.getVariationSelectionInfo=function(){};G();N.register("imageClick",J);N.register("button360Click",J);k.useTabbedImmersiveView(v)&&N.register("videoIngressClick",J)}});"use strict";A.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(e,l,n){return{load:function(a,k){k=k||{};k.timeout=k.timeout||4E3;e.ajax(a,k)}}});"use strict";A.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric",
"postEarlyMetric").register("imageBlockUtils",function(e,l,n,a,k,H,w,q){function d(b){return null!==b&&"undefined"!==typeof b}function h(b){var a=0;l.each(b,function(b,c){var d=parseInt(c[1],10);d>a&&(a=d)});return a}function t(b){var a=0;l.each(b,function(b,c){var d=parseInt(c[0],10);d>a&&(a=d)});return a}function C(b,a,c){a=a.width();if(c.naturalMainImageSize)return a;b=h(b);0<b&&(a=Math.min(a,b));return a}function J(b,a,c){a=a.height();if(c.naturalMainImageSize)return a;b=t(b);0<b&&(a=Math.min(a,
b));return a}function D(b){var a;l.each(b,function(b,c){d(a)||(a=c[1]/c[0])});return a||1}function v(b,a,c){a.fadeTo(500,0,function(){N(b,c);a.fadeTo(500,1)})}function I(b){b&&b.toggle()}function N(b,a){var c=a.find("img");d(c[b])&&l(c[b]).click()}function O(b,a){x[b]=a?a:x[b];return x[b]}function c(b,a,c){c=c||L;c=c.colorImages;if(1>c.length||!d(c[b])||!d(a))return-1;var f=-1;l.each(c[b],function(b,c){c.variant===a&&(f=b)});return f}function y(b,a,c){c=c||L;c=c.colorImages;return!(d(c)&&d(c[b])&&
d(c[b][a])&&d(c[b][a].main))||1>l.map(c[b][a].main,function(b,a){return a}).length?-1:c[b][a]}function r(b,a,c,d){d.parent().css("z-index",2);0!==c&&0!==a&&(a/=c,b>a?d.css("width",a/b*100+"%"):d.css("height",b/a*100+"%"))}function G(b,a){var c;if(c=b.useIV)c=b.colorImages&&b.colorImages[a]&&0<b.colorImages[a].length?!0:!1;w.isEnabled&&(w.IVApplicaple=c,q.logImmersiveViewApplicability(l,w));return c}var m,f,F,L=l.extend(!0,{},k,H),x={};return{isDefined:d,isDefinedAndEmpty:function(b){return d(b)&&
"object"===typeof b&&0===Object.keys(b).length},isUndefinedOrEmpty:function(b){return d(b)?"object"===typeof b&&0===Object.keys(b).length:!0},isDefinedAndNotEmpty:function(b){return d(b)?"object"===typeof b&&0<Object.keys(b).length:!1},isjQueryObjDefined:function(b){return 0!==b.length},getAspectRatio:D,getMaxHeightOfMainImage:J,getMaxWidthOfMainImage:C,getMaxDimensionsOfMainImage:function(b,a,c){var d=J(b,a,c);a=C(b,a,c);b=D(b);c=a/b;a=Math.min(a,d*b);d=Math.min(d,c);return[d,a]},getContainerHeight:function(b,
a,c){var f=b.get(0);b=0;if(d(f)){b=f.offsetWidth/a;b=Math.min(b,c);var h;a=L.mainImageHeightPartitions;c=L.mainImageMaxSizes;if(d(c)&&d(a)){for(var e=0,m=B.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,f=0;f<a.length;f++)m>a[f]&&(e=f+1);c.length>=e&&(h=c[e])}d(h)&&(b=Math.min(h[1],b))}return b},getColorFromState:function(b,a){if(b){a=a||L;var c="";l.each(a.visualDimensions,function(a,d){b[d]&&(c+=" "+b[d])});return c&&c.substring(1)}},createThumbnail:function(b,a,
c,f){var h=c.find(".template").clone().removeClass("template").addClass("item"),m=document.createElement("img");m.src=a;h.find(".placeHolder").replaceWith(m);(a=b.heroVideoVariant)&&"hero-image"===b.type&&b.variant===a&&h.addClass("heroImageThumbnail");d(f)&&h.addClass(f);e.declarative.create(h,"thumb-action",b);c.append(h)},selectGivenThumbnail:function(b,a){var c=b.find(".a-button");a.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},
createAiryInstanceForChromeful:function(b,c,d,h,e,r,k,t){var G=l.extend({},d.foresterMetadataParams);null!==h&&(G.method+="."+h);var q=[];c.disabledViewIds&&(q=c.disabledViewIds);return n.embed({parentElement:b[0],streamingUrls:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,swfUrl:d.swfUrl,foresterMetadataParams:G,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:c.slateUrl,postMediaSlate:c.slateUrl},videoAds:d.videoAds,
bindings:{play:function(){"ImmersiveView"===h?m||(m=!0,a.postCountMetric("dppc_chromefulVideoPlayedIV")):f||(f=!0,a.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(b,a,c){e&&(v(0,r,t),I(k))}}],disabledViewIds:q})},loadMediaIntoAiry:function(b,a,c,d){b&&b.getMediaSourceInfo()!==a.url&&(d?(F={mediaSourceInfo:[a.url],contentId:a.mediaObjectId,refTag:"vse_ib_tablet_web"},b.loadMedia(F)):b.loadMedia({mediaSourceInfo:a.url,contentId:a.mediaObjectId,
contentMinAge:Number(a.minimumAge||"")||0,contentTitle:a.title,slateImages:{preloadSlate:a.slateUrl,postMediaSlate:a.slateUrl}}))},showUnavailable:function(b){b&&(l("#imageBlock .unvailableVariation").html(b),l("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){l("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:v,toggleVideoCaption:I,selectThumbnail:N,spinner:function(b,a){var c=l("#imageBlock .a-spinner").parent();0===c.length&&(c=l("\x3cdiv\x3e\x3c/div\x3e").append(l("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),
b.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));a?c.show():c.hide();return c},rankedImagesReadyEvent:function(b){return"ranked-images-ready-for-"+b},ajaxState:O,getIndexForVariant:c,getImageHash:y,lazyLoadingRequired:function(b,a,d){a=Math.max(c(b.color,
a.getCurrentItem().variant,d),0);a=-1!==y(b.color,a,d);b=d.colorToAsin[b.color]&&d.colorToAsin[b.color].asin;b=!b||"success"!==O(b);return!d.lazyLoadExperienceDisabled&&!a&&b},lazyLoadOnHoverEnabled:function(b){return!b.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:r,repositionVideoBanner:function(b,a,c,d){setTimeout(function(){var c=b.width()/b.height();r(c,16,9,a)},d||0)},getVideosCount:function(b,a){return a.useChildVideos&&a.colorToVideo[b]?a.colorToVideo[b].length:a.videos?a.videos.length:
0},getVideoHash:function(b,a,c){if(c.useChildVideos){if(!d(c.colorToVideo))return-1;b=c.colorToVideo[b]}else b=c.videos;return d(b)&&d(b[a])&&d(b[a].url)?b[a]:-1},isImmersiveViewEnabled:G,playVideoInImmersiveView:function(b,a){return G(b,a)&&b.useTabbedImmersiveView},useTabbedImmersiveView:function(b){return b.useTabbedImmersiveView},getMediaSourceInfo:function(){return d(F)?F.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(b,a,c){a=b.colorToAsin[a]&&b.colorToAsin[a].asin;a=d(a)?a:b.mediaAsin;
return{pageContext:{page:"DetailPageTablet",placement:"ImageBlock",marketplaceID:c.marketPlaceID,locale:c.languageCode,requestId:b.requestId,product:{contentID:a,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:"ASIN",imageURL:c.slateUrl,videoURL:c.url}},configuration:{id:"div-light-player",type:"lightplayer",binder:"lightplayer",assets:["VSECommonComponentAssets","Brila"],features:{features:{placementcontext:"vse_ib_tablet_web"}}}}}}});"use strict";A.when("A","jQuery","imageBlockUtils",
"ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(e,l,n,a,k){function H(c,d,h,f){if(!n.isjQueryObjDefined(c.find(".a-button-selected"))){var e=I.getCurrentItem();if(!f||"chromeless-video"!==e.type||!v.autoplayVideo){f=0;if("hero-image"===e.type){f=q(e.color,e.variant);if(-1===f)return;f=-1!==f?f:0}var k=d+f;k>=h&&(f=0,k=d);d=a.getHeroImageHash(v,e.color,f);-1!==d&&(N.dispatch("updateModel",{data:{index:f,thumbnailIndex:k,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(k),
n.selectGivenThumbnail(l(d),c))}}}function w(a,c,d){if("hero-video"===I.getCurrentItem().type)return a;c=v.heroImage&&v.heroImage[c];var f=a;n.isDefined(c)&&(l.each(c,function(c,d){a<v.maxAlts&&(n.createThumbnail({type:"hero-image",index:c,thumbnailIndex:a,variant:d.variant},d.thumb,O,"imageThumbnail"),a++)}),H(O,f,a,d));return a}function q(a,c){var d=v.heroImage;if(1>d.length||!n.isDefined(d[a])||!n.isDefined(c))return-1;var f=-1;l.each(d[a],function(a,d){d.variant===c&&(f=a)});return f}function d(){if(c.length&&
v.repositionHeroImage){var d=a.getHeroDimParams(v,I.getCurrentItem()),h;n.isDefined(d)&&(h=n.isDefined(d.xPos)?d.xPos+"px "+d.yPos+"px ":"center "+d.yPos+"px ",c.css({"background-position":h,"background-size":d.width+"px "+d.height+"px ","max-width":d.width+"px ","min-height":d.height+"px ",filter:"","-ms-filter":""}))}}function h(d,h,e,f){if(c.length&&d&&h){if("function"===typeof e||f){var k=new Image;k.onload=f?function(){c.css("background-image",'url("'+d+'")')}:e;k.src=d}e=h[1];var k=h[0],l;f||
c.css({"background-image":'url("'+d+'")'});v.repositionHeroImage&&(h=a.getHeroDimParams(v,I.getCurrentItem(),h),n.isDefined(h)&&(e=h.width,k=h.height,l=n.isDefined(h.xPos)?h.xPos+"px "+h.yPos+"px ":"center "+h.yPos+"px "));c.css({"background-position":l,"background-size":e+"px "+k+"px ","max-width":e+"px ","min-height":k+"px ",filter:"","-ms-filter":""})}}function t(c,d,e,f){c=a.getHeroImageHash(v,c,d);if(-1===c)return-1;d=l.map(c.main,function(a,c){return c})[0];h(d,c.main[d],e,f)}function C(c,d,
h){if("hero-image"!==c.type)return-1;var f=q(c.color,I.getCurrentItem().variant),f=-1!==f?f:0;if(-1===a.getHeroImageHash(v,c.color,f))return-1;var e=I.getCurrentItem();c.thumbnailIndex=e.thumbnailIndex;c.type=e.type;c.variant=e.variant;c.index=f;J(c,d,h)}function J(d,h,m){var f=a.getHeroImageHash(v,d.color,d.index),k;k=d&&y&&e.equals(d,y)?!0:!1;y||(y=d);if(!k&&d||h)t(d.color,d.index,h,m),y=d;c.removeClass("hide-background");e.trigger("dp:image-block:update",f)}var D,v,I,N,O,c,y={};return function(a,
h,e,f){D=this;v=a;I=h;N=f;v.heroImage[v.landingAsinColor]=v.heroImage[v.defaultColor];D.render=function(a,d,f,b,h,e,m){O=b;c=l("#heroImage");a=w(d,a,e);C(I.getCurrentItem(),m,e);return a};D.update=function(a){var d=a.data;"ingress"!==d.type&&c.addClass("hide-background");"swatchHover"===a.type?a.captured||(d.type=I.getCurrentItem().type,-1!==C(d)&&(a.captured=!0)):"hero-image"===d.type&&(J(d),"click"!==a.type&&v.usePeekHover||n.selectGivenThumbnail(a.$declarativeParent,O))};N.register("resize",d)}});
"use strict";A.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(e,l,n,a,k){var H,w,q,d;return function(a,k,l,J){H=this;w=a;q=J;H.render=function(a,h,k,l,t,c,q){d=l;H=this;k=w.maxAlts;l=h;t=w.colorImages[a]?w.colorImages[a].length:0;t+=n.getVideosCount(a,w);a=w.heroImage[a];c=0;a&&(c=a.length);a=t+c;a>k&&(k=a-k,a=d.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),
k+="+",l={type:"ingress",index:0,thumbnailIndex:h,variant:""},a.find("#altIngressText").append(k),e.declarative.create(a,"thumb-action",l),d.append(a),l=h++);return l};H.update=function(a){"ingress"===a.data.type&&"click"===a.type&&q.dispatch("imageClick",a)}}});"use strict";A.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(e,l,n){return function(a,e,l){this.getImageHash=function(e){var k=l.getCurrentItem();e=n.getIndexForVariant(k.color,e||"MAIN",a);return n.getImageHash(k.color,
e,a)};this.onImageUpdateForTwister=function(a){e.register("updateSelection",function(e){"swatchClick"===e.type&&"function"===typeof a&&a()})}}});"use strict";A.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(e,l,n){function a(a,e){var d;if(e.repositionHeroImage){d=a[1];var h=a[0];if(768>=(B.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,h*=.7;else{var k=((B.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-
1024)/256,k=Math.max(Math.min(k,1),0);d*=.7+.3*k;h*=.7+.3*k}d=[d,h]}return d}function k(a,e,d){var h;if(d.repositionHeroImage){var k=B.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(n.isDefined(d)){h=Math.max((k-Math.min(1500,a))/2,0);var l=Math.max((k-a)/2,0);h-=l;k=Math.max(Math.min(k,1500),1024);h=h+(k-420-23)/2-a/e[1]*d}}return h}function H(a,e,d){a=a.heroImage;return!(n.isDefined(a)&&n.isDefined(a[e])&&n.isDefined(a[e][d])&&n.isDefined(a[e][d].main))||
1>l.map(a[e][d].main,function(a,d){return d}).length?-1:a[e][d]}return{getHeroImageHash:H,getHeroDimParams:function(e,q,d){if(e.repositionHeroImage){if(!n.isDefined(d)){d=H(e,q.color,q.index);if(-1===d)return;q=l.map(d.main,function(a,d){return d})[0];d=d.main[q]}q=a(d,e);e=k(q[0],d,e);return{height:q[1],width:q[0],xPos:e,yPos:75}}}}});"use strict";A.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(e,l,n,a,k,
H,w){function q(a,d){var k=e.copy(a);if(w.isDefined(a)&&a.length>d){try{for(var l=-1,n=0;n<a.length;n++){var q=a.charAt(n);if(" "===q||"."===q||"?"===q||";"===q||","===q||":"===q)l=n;if(n===d-4){k=a.substring(0,-1===l?n:l);break}}}catch(I){k=a.substring(0,d-3)}k+="..."}return k}function d(a,d){var e=a.lastIndexOf(".");return a="_"===a.charAt(e-1)?a.substring(0,e-1)+d+a.substring(e):a.substring(0,e)+"."+d+a.substring(e)}return{getDimension:function(a,d){var e=parseInt(a.css(d),10);return isNaN(e)?
0:e},attachTabSelectHandler:function(a,d){e.on("dp:ivTabs:"+a+":select",d)},attachTabDeselectHandler:function(a,d){e.on("dp:ivTabs:"+a+":deselect",d)},attachImmersiveViewResizeHandler:function(a){e.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){e.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){e.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(a){l("#"+a).hide()},unhideTabHeading:function(a){l("#"+
a).show()},addStyleCodeToURL:d,getResizedThumbnailURL:function(a,e){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var k="_AA50_";e&&(k+="FMpng_RI_");return d(a,k)},populateVariationSelection:function(a){if(w.isDefined(B.DetailPage)&&w.isDefined(B.DetailPage.StateController)){a.empty();var d=B.DetailPage.StateController.getState(),e=d.variation_label_order,
k;for(k in e)if(e.hasOwnProperty(k)){var n=e[k],q=d.selected_variations[n],n=d.variation_display_labels[n];q&&l("\x3cdiv/\x3e").addClass("ivVariations").text(n+":"+q).appendTo(a)}}},populateTitle:function(a,d,e){a.attr("title",e.title);a.text(q(e.title,d))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,d){a.animate({opacity:.4},100,d)},logError:function(a,d,e,k){B.ueLogError&&B.ueLogError(k,{logLevel:a,attribution:d,message:e})}}});"use strict";A.when("A","a-modal",
"a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(e,l,n,a,k,H,w,q){function d(){var a=m.getCurrentItem().color;L=G.colorImages[a];F=G.heroImage[a];x=b=0;k.isDefined(F)&&(x=F.length);k.isDefined(L)&&(b=L.length)}function h(a){return a.hiRes||a.large||a.main[a.main.length-1]}function t(){var a=f.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");
var e=d.width(),g=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(g=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,g=0===g?1:g,h=Math.min(b/e,c/g),k=g*h,m=e*h;1>h?(E?a.css("cursor","url('"+G.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),B=!0):B=!1;e=Math.min(m,e);g=Math.min(k-20,g);d.css({"margin-top":(c-g)/2,"margin-left":(b-e)/2,height:g,width:e});a.css("visibility",
"visible");A=!1}function C(a){var b=f.find("#ivLargeImage");b.css("visibility","hidden");b.empty();q.animateStageIn(b);b.append(a);t()}function J(b){f.find("#ivLargeImage").css("display","none");f.find("#ivLargeImage").css("display","block");var c;"hero-image"===b?k.isDefined(F)&&(c=h(F[g.index])):k.isDefined(L)&&(c=h(L[g.index]));if(k.isDefined(c)){f.find(".fullscreen").remove();var d=a("\x3cimg\x3e").attr("src",c).addClass("fullscreen"),e=f.find("#ivLargeImage");q.animateStageOut(e,function(){d.load(function(){C(d)});
if(d[0].complete)C(d);else{e.empty();var b=(e.height()-104)/2,c=(e.width()-80)/2;a("\x3cimg\x3e").attr("src",G.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(e)}})}}function D(a){f.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?g.type="hero-image":g.type="image";g.index=a.attr("id").split("_")[1];J(g.type);w.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(g.index,10)+1)+"_"+(x+b))}function v(){f.delegate(".ivThumb","click",
function(){var b=a(this);D(b)})}function I(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function N(a){var b=R.top-(a.pageY-Q[1])*T;a=I(R.left-(a.pageX-Q[0])*T,K.left);b=I(b,K.top);f.find(".fullscreen").css({left:a,top:b})}function O(){f.delegate("#ivLargeImage","click",function(a){if(A)t();else if(B){f.find(".fullscreen").removeAttr("style");if(B){var b=f.find("#ivLargeImage"),c=b.find(".fullscreen");E?b.css("cursor","url('"+G.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),
b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));A=!0;var d=f.find("#ivLargeImage");K.left=d.width()-c.width();K.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;Q=[b.offset().left+e,b.offset().top+d];R.top=d-c.height()/2;R.left=e-c.width()/2;c.css({position:"relative",left:R.left,top:R.top});T=Math.max(c.height()/b.height(),c.width()/b.width())}N(a);w.postCountMetric("dpcc_iv_largeImageCLick")}});f.delegate("#ivLargeImage","mousemove",function(a){A&&N(a)})}function c(){f.find("#ivLargeImage").empty()}
function y(c){if(p){f=a("#ivMain");d();g=m.getCurrentItem();q.populateTitle(f.find("#ivTitle"),160,G);q.populateVariationSelection(f.find("#ivVariationSelection"));c=f.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var e=x+b,h=0,l=0;h<e;)for(var n=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),r=0;4>r&&h<e;r++,h++,l++)if(l<x){var y=F[h].thumb,t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+
h).appendTo(n);t.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(y)+'") center no-repeat')}else l>=x&&l<b+x&&(y=L[h-x].thumb,t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(h-x)).appendTo(n),t.find(".ivThumbImage").css("background",'url("'+q.getResizedThumbnailURL(y)+'") center no-repeat'));U();p=!1}c=a("#ivImagesTab").height();f.css("height",c);e=f.find("#ivTitle").outerHeight(!0);h=f.find("#ivVariationSelection").outerHeight(!0);
l=f.find("#ivThumbs");n=q.getDimension(l,"margin-top")+q.getDimension(l,"margin-bottom");l.css("height",c-e-h-n);f.find("#ivLargeImage").css("height",c);c=f.find("#ivStage");e=f[0]&&f[0].getBoundingClientRect&&Math.floor(f[0].getBoundingClientRect().width)||f.width();c.css("width",e-q.getDimension(f,"padding-left")-q.getDimension(f,"padding-right")-f.find("#ivThumbColumn").width()-q.getDimension(c,"margin-left")-q.getDimension(c,"margin-right"));g=m.getCurrentItem();c="hero-image"===g.type?f.find("#ivHeroImage_"+
g.index):"image"===g.type?f.find("#ivImage_"+g.index):k.isDefined(F)?f.find("#ivHeroImage_"+g.index):f.find("#ivImage_"+g.index);k.isjQueryObjDefined(c)||(c=f.find("#ivImage_0"));D(c)}var r,G,m,f,F,L,x,b,g,E=navigator.userAgent.match(/msie|trident/i),p=!0,A=!1,B=!1,K={},R={},T,Q,p=!0,U=e.once(function(){v();O();q.attachImmersiveViewResizeHandler(y);q.attachTabDeselectHandler("ivImagesTab",c)});return function(c,e,f,g){r=this;G=c;m=e;r.render=function(c,e,f,g,h,k){p=!0;d();0===x+b?q.hideTabHeading("ivImagesTabHeading"):
q.unhideTabHeading("ivImagesTabHeading");1===x+b?a("#ivThumbs").hide():a("#ivThumbs").show()};r.update=function(a){};q.attachTabSelectHandler("ivImagesTab",y)}});"use strict";A.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(e,l,n,a,k,A,w,q,d,h){function t(){m.delegate(".ivThumb","click",function(){var b=a(this);m.find(".ivThumb").removeClass("selected");
b.addClass("selected");b.hasClass("ivThumbVideo")&&(f.type="chromeful-video",f.index=b.attr("id").split("_")[1])})}function C(){var b=a("#ivVideosTab").height();m.css("height",b);var c=m.find(".vse-video-block");L=b-q.getDimension(m,"padding-top")-q.getDimension(m,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(Z)m.css({"max-width":Math.floor(1.77*L)});else{var b=m.find(".vse-airy-container"),c=m.find(".vse-ib-metadata"),d=Math.floor(L-q.getDimension(c,"height")),e=Math.floor(1.77*
d);b.css({"max-height":d,"max-width":e});c.css("max-width",e);M&&(b=m.find(".vse-vertical-scroll"),c=q.getDimension(b,"margin-top")+q.getDimension(b,"margin-bottom"),b.css("max-height",L-c))}}function J(){D();F&&F.pause();K=!1;E=!0;g=null}function D(){K=!1;F&&F.pause()}function v(b){g=b.clickTimeStamp;p&&(h.get(e,"#ivVideoBlock",G,U,da),m=a("#ivVideoBlock"),r.getCurrentItem(),f=r.getCurrentItem(),R());C();K=!0;p=!1;O()}function I(b){p&&(m=a("#ivVideoBlock"),r.getCurrentItem(),f=r.getCurrentItem(),
R());K&&O();C()}function N(a){F=a.airy;K&&F.play({isAsync:!0})}function O(){if(F&&(F.play({isAsync:!0,eventTimestamp:g||(new Date).getTime()}),w.postCountMetric("dpcc_vse_videoBlock_video_played"),E)){var a=B.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,w.postTimeMetric("dpcc_vse_vitff",a),E=!1)}}var c,y,r,G,m,f,F,L,x,b,g,E=!0,p=!0,Z=!1,M=!1,K=!1,R=e.once(function(){t();q.attachImmersiveViewResizeHandler(I);q.attachTabDeselectHandler("ivVideosTab",D);q.attachImmersiveViewResetHandler(J)}),
T=function(b,c,d){a("#ivVideoBlockSpinner").addClass("aok-hidden");w.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+c.placement);b=r.getCurrentItem().color;b=k.getVideoHash(b,0,y);F||(F=k.createAiryInstanceForChromeful(a("#ivVideoBlock"),b,y.airyConfig,"ImmersiveView"));Z=!0;a("#ivVideoBlock").css({"max-width":1.77*L,margin:"0 auto"});K&&Z&&F.play({isAsync:!0})},Q=function(b,c,d){p||h.get(b,"#ivVideoBlock",G,U,da);a("#ivVideoBlockSpinner").addClass("aok-hidden")},U=function(a,b,c){M=!0;C();
K&&O()},da=function(a,b,c){w.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,f,g,h){c=this;y=a;r=f;c.render=function(a,c,f,g,h,l){a=r.getCurrentItem().color;c=k.getVideoHash(a,0,y);x=y.colorToAsin[a]&&y.colorToAsin[a].asin;x=k.isDefined(x)?x:y.mediaAsin;b=null!==y.vseVideoDataSourceTreatment&&"T1"===y.vseVideoDataSourceTreatment?"ASIN":"physicalID";p=!0;-1===c?q.hideTabHeading("ivVideosTabHeading"):(q.unhideTabHeading("ivVideosTabHeading"),
G={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:c.marketPlaceID,locale:c.languageCode,product:{contentID:x,contentIDType:"ASIN"},video:{contentID:c.mediaObjectId,contentIDType:b,videoURL:c.url,imageURL:c.slateUrl},requestId:y.dpRequestId,metadata:{ProductTitle:y.title}},d.get(e,"#ivVideoBlock",G,Q,T))};c.update=function(a){};q.attachTabSelectHandler("ivVideosTab",v);e.on("vseAiry",N)}});"use strict";A.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","ImageBlockLoader",
"nexusLogger360","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView360",function(e,l,n,a,k,A,w,q,d){function h(){var b=a("#iv360Tab").height();M.css("height",b);var c=M.find("#ivTitle360").outerHeight(!0),e=M.find("#ivVariationSelection360").outerHeight(!0),f=M.find("#ivThumbs360"),g=d.getDimension(f,"margin-top")+d.getDimension(f,"margin-bottom");f.css("height",b-c-e-g);b=M.find("#ivStage360");c=M[0]&&M[0].getBoundingClientRect&&Math.floor(M[0].getBoundingClientRect().width)||
M.width();b.css("width",c-d.getDimension(M,"padding-left")-d.getDimension(M,"padding-right")-M.find("#ivThumbColumn360").width()-d.getDimension(b,"margin-left")-d.getDimension(b,"margin-right"))}function t(){v();var a=M.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);C()}function C(){if(0<W){var a=M.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function B(b,c){if(W<b.length){var d=a("\x3cimg /\x3e").css({display:"block",
width:6*R+"px",height:T+"px"});d.hide();c.append(d);d.get(0).onload=function(){c.closest(document.documentElement).length&&(W++,1===W&&(C(),0<fa&&(w.time("dppc_loadTime360",Date.now()-fa,p.mediaAsin),q.postTimeMetric("dppc_loadTime360",Date.now()-fa))),0<ca&&(w.time("dppc_perSpriteloadTime360",Date.now()-ca,p.mediaAsin),q.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ca)),M.find("#iv360Spinner").hide(),d.show(),ba=5*K.imageLocations[Math.floor(ja/K.imageLocations[0].length)][ja%K.imageLocations[0].length],
B(b,c))};d.attr("src",b[W].replace(/(\._SP)\d+(,)\d+/,"$1"+U+"$2"+Q));ca=Date.now()}}function D(a){if(k.isDefined(K.spriteWidthSizes)&&0<K.spriteWidthSizes.length){var b=K.spriteWidthSizes,c=b.length,d=b[0],e=b[c-1];if(a<=d)return d;if(a>e)return e;for(d=0;d<c;d++)if(a>b[d]&&a<=b[d+1])return b[d+1]}else return a}function v(){var b=M.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),
height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",p.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),la=!0,I())}function I(){if(k.isDefined(K.spriteURLs)&&k.isDefined(M)&&la&&!ea){var b=M.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});k.isDefined(K.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",K.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(p.staticStrings.dragToSpin).appendTo(d);d.appendTo(b);var d=K.imageWidth,e=K.imageHeight,f=b.parent().width(),g=b.parent().height(),h=0,l=0;d/e>f/g?(U=D(f),Q=Math.round(e/d*U),R=Math.ceil(f),T=Math.ceil(Q/U*f),l=(g-T)/2):(Q=D(g),U=Math.round(d/
e*Q),T=Math.ceil(g),R=Math.ceil(U/Q*g),h=(f-R)/2);b.css({"margin-left":h,"margin-top":l,width:R+"px",height:T+"px",overflow:"hidden",position:"relative"});b.children("#image-360-sprites").css("width",6*R+"px");B(K.spriteURLs,M.find("#image-360-sprites"),0);d=M.find("#ivLarge360");d.bind("mousedown",y);d.bind("touchstart",N);d.bind("touchmove",O);d.bind("touchend",c);a(document).bind("mousemove",r);a(document).bind("mouseup",G);k.isDefined(p.staticImages.grab)&&b.css("cursor","url('"+p.staticImages.grab+
"'), auto");ea=!0}}function N(a){z=!0;ha=a.originalEvent.targetTouches[0].clientX}function O(a){z&&(m(a.originalEvent.targetTouches[0].clientX-ha),ha=a.originalEvent.targetTouches[0].clientX)}function c(a){z&&(z=!1)}function y(a){V=!0;da=a.originalEvent.clientX;k.isDefined(p.staticImages.grabbing)&&(a=M.find("#ivLarge360"),a.css("cursor","url('"+p.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+p.staticImages.grabbing+"'), auto"));return!1}function r(a){V&&
(m(a.originalEvent.clientX-da),da=a.originalEvent.clientX)}function G(a){V&&(V=!1,k.isDefined(p.staticImages.grab)&&(a=M.find("#ivLarge360"),a.css("cursor","url('"+p.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function m(a){ba-=a/R*180;ia&&(w.count("dppc_360dragToSpin",p.mediaAsin),q.postCountMetric("dppc_360dragToSpin"));ia=!1;for(a=ba;0>a;)a+=360;for(;360<a;)a-=360;ba=a;var b;a=360;for(var c=0;c<W;c++)for(var d=0;d<K.imageLocations[c].length;d++){var e=
Math.abs(ba-5*K.imageLocations[c][d]);e<a&&(a=e,b=c*K.imageLocations[0].length+d)}b!==ja&&(a=Math.floor(b/K.imageLocations[0].length),a!==Math.floor(ja/K.imageLocations[0].length)&&(k.isDefined(pa)||(pa=document.createElement("canvas").getContext("2d")),c=M.find("#image-360-sprites").children(),pa.drawImage(c[a],0,0)),a=M.find(".iv360Hint").not(".iv360HintFaded"),k.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ja=b;a=b%K.imageLocations[0].length*-1*R;b=-1*Math.floor(b/K.imageLocations[0].length)*
T;c=M.find("#ivLarge360").children("#image-360-sprites");c.css("-webkit-transform","translate3d("+a+"px, "+b+"px, 0)");c.css("transform","translate3d("+a+"px, "+b+"px, 0)")}function f(){if(ga){M=a("#ivMain360");var b=Z.getCurrentItem().color;L()&&x(b);K=L()?p.spin360ColorData[b]:void 0;d.populateTitle(M.find("#ivTitle360"),160,p);d.populateVariationSelection(M.find("#ivVariationSelection360"));M.find("#ivLarge360").empty();W=0;ea=la=!1;ja=ba=0;na();ga=!1}0!==a("#iv360Tab").height()&&(d.detachImmersiveViewResizeHandler(f),
h(),t(),fa=Date.now(),u=ia=!0,w.count("dppc_click360",p.mediaAsin),q.postCountMetric("dppc_click360"))}function F(a){var b=p.colorToAsin[a],c={},d=500;if(!b||!b.asin)if(a===p.defaultColor)b={asin:p.winningAsin};else return;c.params={asin:b.asin};var e="360"+b.asin,f=Date.now();c.success=function(b){w.time("dppc_asyncRequestTime360",Date.now()-f,p.mediaAsin);q.postTimeMetric("dppc_asyncRequestTime360",Date.now()-f);b&&k.isDefined(b.spin360.spin360Model)?(k.ajaxState(e,"success"),p.spin360ColorData[a]=
b.spin360.spin360Model,a===Z.getCurrentItem().color&&(K=p.spin360ColorData[a],I())):c.error()};c.error=function(){w.count("dppc_asyncFailed360",p.mediaAsin);q.postCountMetric("dppc_asyncFailed360");w.time("dppc_asyncRequestTime360",Date.now()-f,p.mediaAsin);q.postTimeMetric("dppc_asyncRequestTime360",Date.now()-f);d*=2;16E3>=d?setTimeout(function(){f=Date.now();A.load("/gp/product/features/apparel-main-image/360.html",c)},d):k.ajaxState(e,"fail")};k.ajaxState(e)&&"fail"!==k.ajaxState(e)||(A.load("/gp/product/features/apparel-main-image/360.html",
c),k.ajaxState(e,"sent"))}function L(){return k.isDefined(p.spin360ConfigEnabled)&&p.spin360ConfigEnabled}function x(a){return k.isDefinedAndNotEmpty(p.spin360ColorData[a])?!0:p.spin360ColorEnabled.hasOwnProperty(a)?p.landingAsinColor===p.defaultColor?b():p.spin360ColorEnabled[a]:b()}function b(){return k.isDefined(p.spin360LazyLoadEnabled)&&p.spin360LazyLoadEnabled}function g(){u&&(w.time("dppc_duration360",Date.now()-fa,p.mediaAsin),q.postTimeMetric("dppc_duration360",Date.now()-fa),u=!1)}var E,
p,Z,M,K,R,T,Q,U,da,ha,la=!1,ea=!1,ba=0,ja=0,fa=0,ca=0,V=!1,z=!1,W=0,pa,ia=!0,u=!1,ga=!0,na=e.once(function(){d.attachImmersiveViewResizeHandler(f);d.attachImmersiveViewResizeHandler(h);d.attachImmersiveViewResetHandler(g);d.attachTabDeselectHandler("iv360Tab",g)});return function(c,g,h,l){E=this;p=c;Z=g;L()&&!b()&&(p.spin360ColorData[p.landingAsinColor]=p.spin360ColorData[p.defaultColor],p.spin360ColorEnabled[p.landingAsinColor]=p.spin360ColorEnabled[p.defaultColor]);k.isDefined(p.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",d.addStyleCodeToURL(p.staticImages.icon360,"_FMpng_RI_"));E.render=function(b,c,f,g,h,l){if(b===p.landingAsinColor||p.spin360ColorEnabled.hasOwnProperty(b))return ga=!0,L()&&x(b)?(k.isUndefinedOrEmpty(p.spin360ColorData[b])&&(p.spin360ColorData[b]={},F(b)),a("#ivThumbs360").hide(),d.unhideTabHeading("iv360TabHeading")):d.hideTabHeading("iv360TabHeading"),k.isImmersiveViewEnabled(p,Z.getCurrentItem().color)&&L()&&x(b)&&
(c===p.maxAlts&&(b=g.find(".item.imageThumbnail"),f=g.find(".item.videoThumbnail"),k.isDefined(f)&&1<f.length?f.last().remove():b.last().remove(),c--),b=g.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),e.declarative.create(b,"button-360-click"),g.append(b),c++,w.count("dppc_display360",p.mediaAsin),q.postCountMetric("dppc_display360")),c};E.update=function(a){};d.attachTabSelectHandler("iv360Tab",f)}});A.register("nexusLogger360",function(){return{count:function(e,
l){B.ue&&B.ue.event({asin:l,metricName:e,metricValue:1},"hit-360","hit360.clientEvent.3")},time:function(e,l,n){B.ue&&B.ue.event({asin:n,metricName:e,metricValue:l},"hit-360","hit360.clientEvent.3")}}});"use strict";A.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",function(e,l){try{var n=B.location.host,a={dub:"https://www.amazon.co.uk/vap/ew/",pdx:"https://www.amazon.co.jp/vap/ew/"},k=n.split(".")[1],H=-1===n.indexOf(".proxy.amazon.com")?"/vap/ew/":void 0!==a[k]?a[k]:
"https://www.amazon.com/vap/ew/",w="vse_lazyLoaderHook:success:",q="vse_lazyLoaderHook:error:",d="vse_preLoaderHook:success:",h="vse_preLoaderHook:error:",t="vse_lightPlayerLoaderHook:success:",C="vse_lightPlayerLoaderHook:error:",J=4E3,D=3}catch(v){l.logError("FATAL","vse_ns_desktop","[Domain] ",v)}A.register("vse_ns_preLoaderHook",function(){function a(k,n){try{var c=k.A,q=k.block,r=k.request,t=k.handleFailure,m=k.handleSuccess,f=c.$;n--;var w=D-n-1,v=c.now();c.ajax(H+"componentbuilder",{params:r,
paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:r.timeout||J,withCredentials:!0,success:function(a){var g=c.now()-v;e.postTimeMetric(d,g);e.postCountMetric(d+r.page+":"+r.placement+":"+w);f(q).html(a);m(c,r,a)},error:function(b){e.postCountMetric(h+r.page+":"+r.placement+":"+w);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<n?a(k,n):(e.postCountMetric(h,1),t(c,r,b))}})}catch(x){l.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",x)}}
return{get:function(d,e,c,h,k){a({A:d,block:e,request:c,handleFailure:k,handleSuccess:h},D)}}});A.register("vse_ns_lazyLoaderHook",function(){function a(d,h,c){try{var k=d.A,n=d.context,t=d.handleFailure,m=d.handleSuccess;h.attr("data-configuration");var f=atob(h.attr("data-configuration")),v=JSON.parse(f),A={pageContext:n,configuration:v},x=k.now();c--;var b=D-c-1;k.ajax(H+"subcomponent/"+v.type,{params:A,paramsFormat:"json",method:"post",contentType:"application/json",timeout:n.timeout||J,withCredentials:!0,
success:function(a){var c=k.now()-x;e.postTimeMetric(w,c);e.postCountMetric(w+n.page+":"+n.placement+":"+v.type+":"+b);h.html(a);m(k,A,a)},error:function(f){e.postCountMetric(q+n.page+":"+n.placement+":"+v.type+":"+b);(0===f.http.status||500<=f.http.status&&599>=f.http.status)&&0<c?a(d,h,c):(e.postCountMetric(q,1),t(k,A,f))}})}catch(g){l.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",g)}}return{get:function(d,e,c,h,k){var l=d.$;l(e+" div[data-configuration]").each(function(){a({A:d,
context:c,handleFailure:k,handleSuccess:h},l(this),D)})}}});A.register("vse_ns_videoPlayer",function(){function a(d,h,c){try{var k=d.A,n=d.block,q=d.request,m=d.handleFailure,f=d.handleSuccess,v=k.$;c--;var w=D-c-1,x=k.now();k.ajax(H+"subcomponent/lightvideoplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||J,withCredentials:!0,success:function(a){var b=k.now()-x;e.postTimeMetric(t,b);e.postCountMetric(t+q.page+":"+q.placement+":"+
w);v(n).html(a);f(k,q,a)},error:function(b){e.postCountMetric(C+q.page+":"+q.placement+":"+w);(0===b.http.status||500<=b.http.status&&599>=b.http.status)&&0<c?a(d,c):(e.postCountMetric(C,1),m(k,q,b))}})}catch(b){l.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",b)}}return{get:function(d,e,c,h,k){a({A:d,block:e,request:c,handleFailure:k,handleSuccess:h},D)}}})})});